```git
git pull origin master
```

# 学习随笔

##### 1.@Controller与@RestController区别

@Controller是SpringMVC中常用的注解，可通过视图解析器执行页面跳转；@RestController是前后端分离时常用的注解，为@ResponseBody+@Controller两个注解相加，即在该Controller所有方法上都添加@ResponseBody注解，代表此Controller返回的都为json字符串，不可执行页面跳转。

若在Controller注解为@Controller，在某方法添加@ResponseBody注解，也可实现该方法返回json字符串。

##### 2.SpringBoot注解@SpringBootApplication

包含三个注解

```java
@ComponentScan
/*这个注解是扫描本包及其子包下想让容器管理的类，即添加注解@Component，@Repository，@Service，@Controller的类，对应以前xml配置文件中的<context:component-scan>*/
@EnableAutoConfiguration
/*该注解的作用为启动自动的配置，就是根据jar包配置项目所需要的默认配置，如根据spring-boot-starter-web，会自动配置web项目所需的默认配置*/
@SpringBootConfiguration
/*该注解继承自@Configuration，功能也是相似的，即标注此类为配置类，且若此类中有添加@Bean的方法，则把返回值作为实例纳入到容器中管理，该实例名字为方法名*/
```

开启自动装配的就是@EnableAutoConfiguration。

##### 3.找到SpringBoot有哪些自动装配

@SpringBootApplication
-->
@EnableAutoConfiguration
-->
AutoConfigurationImportSelector.class
-->
getCandidateConfigurations()
-->
META-INF/spring.factories

##### 4.数据库连接池**HiKariCP**

<https://github.com/brettwooldridge/HikariCP>

优点：

1. 字节码精简：优化代码，直到编译后的字节码最少，这样，CPU缓存可以加载更多的程序代码；

  优化代理和拦截器：减少代码，例如HikariCP的Statement proxy只有100行代码，只有BoneCP的十分之一；

2. 自定义数组类型（FastStatementList）代替ArrayList：避免每次get()调用都要进行range check，避免调用remove()时的从头到尾的扫描；

3. 自定义集合类型（ConcurrentBag）：提高并发读写的效率；

4. 数据库连接中断处理：等待5秒钟后，如果连接还是没有恢复，则抛出一个SQLExceptions 异常；后续的getConnection()也是一样处理。

##### 5.数据源连接数

HiKariCP中默认最大最小都为10，生产中一般5（最小）—— 20（最大）。

##### 6.mybatis-generator生成问题

若以model形式存在时，需将配置文件**generatorConfig.xml**放在父项目根目录下，生成的pojo、mapper文件将会在父项目的src和resources中。

注：若不确定文件所放位置，可以用new File的形式创建一个文件，看看放在哪里。